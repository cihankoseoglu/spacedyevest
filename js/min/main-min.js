function stop(){clearInterval(timer),timer=void 0,running=0,d3.select("#launch").property("value","launch model").on("click",run)}function reset(){stop(),grid=d3.range(47).map(function(e){return d3.range(25).map(function(t){return{value:0,row:t,col:e}})})}function run(){timer=setInterval(update,3e3),running=1,d3.select("#launch").property("value","stop").on("click",stop)}function drawGrid(){svg.selectAll(".col").data(grid).selectAll(".cells").data(function(e){return e}).attr("y",function(e){return 20*e.row+1}).attr({x:1,width:18,height:18,rx:3,ry:3}).style({stroke:"#20c0d0",fill:function(e){return e.value?liveC:"#20c0d0"}}).attr("id",function(e){return"C"+e.row+"-"+e.col}).on("click",function(e){running&&stop();var t=e.value=1-e.value;d3.select(this).transition().style("fill",t?liveC:"#20c0d0")})}function neighbors(e,t){return n=0,e&&(t&&(n+=grid[e-1][t-1].value),n+=grid[e-1][t].value,24>t&&(n+=grid[e-1][t+1].value)),t&&(n+=grid[e][t-1].value),24>t&&(n+=grid[e][t+1].value),46>e&&(t&&(n+=grid[e+1][t-1].value),n+=grid[e+1][t].value,24>t&&(n+=grid[e+1][t+1].value)),n}function evolve(){var e=0,t=d3.range(47).map(function(e){return d3.range(25).map(function(t){return grid[e][t].value})});d3.range(47).forEach(function(e){d3.range(25).forEach(function(r){n=neighbors(e,r),grid[e][r].value?(n<2||n>3)&&(d3.select("#C"+r+"-"+e).call(die),t[e][r]=0):3==n&&(d3.select("#C"+r+"-"+e).call(rise),t[e][r]=1)})}),d3.range(47).forEach(function(n){d3.range(25).forEach(function(r){grid[n][r].value!=t[n][r]&&(e+=1,grid[n][r].value=t[n][r])})}),e||stop()}function die(e){var t=e.datum();e.transition().duration(1500).attr({height:0,y:20*t.row+18}).style("fill","#efefef").each("end",function(){d3.select(this).style("fill","#20c0d0")})}function rise(e){var t=e.datum();e.attr({x:10,y:10+20*t.row,height:0,width:0}).style("fill",liveC).transition().delay(1500).duration(1500).ease("elastic").attr({x:1,y:1+20*t.row,height:18,width:18})}function update(){drawGrid(),evolve()}w=480,h=260,svg=d3.select("#chart").append("svg").attr({width:w,height:h}).append("g").attr("transform","translate(20,10)");var grid,running=!1,timer,liveC="#efefef";svg.selectAll(".gridv").data(d3.range(48)).enter().append("path").attr("d",function(e){return"M"+20*e+",0 v 500"}).style("stroke","#20c0d0"),svg.selectAll(".gridv").data(d3.range(26)).enter().append("path").attr("d",function(e){return"M0,"+20*e+" h 940"}).style("stroke","#20c0d0"),reset(),grid=d3.range(47).map(function(e){return d3.range(25).map(function(t){return{value:Math.random()>.85?1:0,row:t,col:e}})}),svg.selectAll(".col").data(grid).enter().append("g").classed("col",1).attr("transform",function(e,t){return"translate("+20*t+",0)"}).selectAll(".cells").data(function(e){return e}).enter().append("rect").classed("cells",1),drawGrid(),d3.select("#reset").on("click",function(){console.log("reset"),reset(),drawGrid()}),run();
//# sourceMappingURL=./main-min.js.map